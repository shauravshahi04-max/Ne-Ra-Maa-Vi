<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Update Student</title>
  <link rel="stylesheet" href="admin.css">
</head>
<body>

<script>
  if (
    localStorage.getItem("isLoggedIn") !== "true" ||
    localStorage.getItem("role") !== "admin"
  ) {
    window.location.href = "/pages/auth/admin-login.html";
  }
</script>

<h2>Update Student Records</h2>

<div class="update-box">
  <input id="studentId" placeholder="Student ID (STD101)" />

  <input id="attendance" type="number" placeholder="Attendance %" />

  <select id="fees">
    <option value="Paid">Paid</option>
    <option value="Unpaid">Unpaid</option>
  </select>

  <input id="result" placeholder="Result (e.g. Pass / GPA 3.8)" />

  <button onclick="updateStudent()">Update</button>
</div>

<script>
function updateStudent() {
  const studentIdInput = document.getElementById("studentId");
  const attendanceInput = document.getElementById("attendance");
  const feesInput = document.getElementById("fees");
  const resultInput = document.getElementById("result");

  const id = studentIdInput.value.trim();

  const records =
    JSON.parse(localStorage.getItem("studentRecords")) || {};

  if (!records[id]) {
    alert("Student not found");
    return;
  }

  records[id].attendance = Number(attendanceInput.value);
  records[id].feesStatus = feesInput.value;
  records[id].results.final = resultInput.value;

  localStorage.setItem(
    "studentRecords",
    JSON.stringify(records)
  );

  alert("Student data updated successfully");

  /* âœ… AUTO REFRESH FORM FOR NEXT STUDENT */
  studentIdInput.value = "";
  attendanceInput.value = "";
  resultInput.value = "";
  feesInput.value = "Unpaid";

  studentIdInput.focus();
}
</script>


</body>
</html>
